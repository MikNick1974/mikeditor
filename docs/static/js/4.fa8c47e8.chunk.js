(this["webpackJsonpspace-haven-editor"]=this["webpackJsonpspace-haven-editor"]||[]).push([[4],{102:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function e(t,a){var r,i;if(t===a)return!0;if(t&&a&&(r=t.constructor)===a.constructor){if(r===Date)return t.getTime()===a.getTime();if(r===RegExp)return t.toString()===a.toString();if(r===Array){if((i=t.length)===a.length)for(;i--&&e(t[i],a[i]););return-1===i}if(!r||"object"===typeof t){for(r in i=0,t){if(n.call(t,r)&&++i&&!n.call(a,r))return!1;if(!(r in a)||!e(t[r],a[r]))return!1}return Object.keys(a).length===i}}return t!==t&&a!==a}},103:function(e,t,n){"use strict";t.a={15:{name:"Root vegetables"},16:{name:"Water"},40:{name:"Ice"},71:{name:"Bio Matter"},127:{name:"Rubble"},157:{name:"Base Metals"},158:{name:"Energium"},162:{name:"Infrablock"},169:{name:"Noble Metals"},170:{name:"Carbon"},171:{name:"Raw Chemicals"},172:{name:"Hyperium"},173:{name:"Electronic Component"},174:{name:"Energy Rod"},175:{name:"Plastics"},176:{name:"Chemicals"},177:{name:"Fabrics"},178:{name:"Hyperfuel"},179:{name:"Processed Food"},706:{name:"Fruits"},707:{name:"Artificial Meat"},712:{name:"Space Food"},725:{name:"Assault Rifle"},728:{name:"SMG"},729:{name:"Shotgun"},760:{name:"Five-Seven Pistol"},930:{name:"Techblock"},984:{name:"Monster Meat"},985:{name:"Human Meat"},1759:{name:"Hull Block"},1873:{name:"Infra Scrap"},1874:{name:"Soft Scrap"},1886:{name:"Hull Scrap"},1919:{name:"Energy Block"},1920:{name:"Superblock"},1921:{name:"Soft Block"},1922:{name:"Steel Plates"},1924:{name:"Optronics Component"},1925:{name:"Quantronics Component"},1926:{name:"Energy Cell"},1932:{name:"Fibers"},1946:{name:"Tech Scrap"},1947:{name:"Energy Scrap"},1954:{name:"Human Corpse"},1955:{name:"Monster Corpse"},2053:{name:"Medical Supplies"},2058:{name:"IV Fluid"},2657:{name:"Nuts and Seeds"},2475:{name:"Fertilizer"},2715:{name:"Explosive Ammunition"}}},594:function(e,t,n){e.exports={input:"storagerow_input__1eScw",nameField:"storagerow_nameField__7i2x4"}},595:function(e,t,n){e.exports={wrapper:"storage_wrapper__1j-dn",table:"storage_table__2wdjG"}},596:function(e,t,n){e.exports={wrapper:"ship_wrapper__3yeAy",infoBar:"ship_infoBar__2eB7C",crewLink:"ship_crewLink__3a9hh",titleBar:"ship_titleBar__qvvWH",storageSpace:"ship_storageSpace__Gj7Zy"}},597:function(e,t,n){e.exports={image:"shipimage_image__1c9dT"}},610:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(93),i=n(19),s=n(98),c=n(87),l=n(94),o=n(16),u=n(95),d=n(38),m=n(103),j=n(594),b=n.n(j),f=n(2);var p=({item:e,onChange:t})=>{var n,r,i,s;const[c,l]=Object(a.useState)(!1);return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:b.a.nameField,children:(null===(n=m.a[null===(r=e._attributes)||void 0===r?void 0:r.elementaryId])||void 0===n?void 0:n.name)||"Unknown"}),Object(f.jsx)("td",{onClick:()=>{!c&&l(!0)},children:c?Object(f.jsx)("input",{type:"number",defaultValue:null===(i=e._attributes)||void 0===i?void 0:i.inStorage,autoFocus:!0,onBlur:n=>{var a;const r=n.currentTarget.value;l(!1),t&&t(null===(a=e._attributes)||void 0===a?void 0:a.elementaryId,r)},className:b.a.input}):null===(s=e._attributes)||void 0===s?void 0:s.inStorage})]})},v=n(595),h=n.n(v);var O=({shipId:e,tileDetails:t,inventory:n,rules:r,eatAllowed:s})=>{const{editGameData:c}=Object(a.useContext)(i.a),l=(n,a)=>{c({type:"setStorageElement",ship:e,count:a,element:n,...t})};return Object(f.jsxs)(u.a,{className:h.a.wrapper,children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"checkbox",defaultChecked:!!parseInt(s)}),Object(f.jsx)("span",{children:"Direct eat allowed"})]}),Object(f.jsxs)("table",{className:h.a.table,children:[(!n||0===n.length)&&Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Emtpy"}),Object(f.jsx)("td",{})]}),Array.isArray(n)&&(null===n||void 0===n?void 0:n.map((e=>{var t;return Object(f.jsx)(p,{onChange:l,item:e},null===(t=e._attributes)||void 0===t?void 0:t.elementaryId)})))]})]})},x=n(596),_=n.n(x);var g=e=>null===e||void 0===e?void 0:e.filter((e=>{var t;return!!(null===(t=e.l)||void 0===t?void 0:t.some((e=>{var t;return!!(null===(t=e.feat)||void 0===t?void 0:t.inv)})))}));var w=(e,t)=>{if(!Array.isArray(e))throw new TypeError;const n=[];e.forEach((e=>{const{x:t,y:a}=e._attributes;n[t]||(n[t]=[]),n[t][a]=e}));const a=["38","46","47","206","1144","1149","1711","1713","1794","2758","2759","2760","2762","2763","3029","3031"],r=["31","43","44","48","115","122","423","425","426","428","438","2757","2764","2765","2767","2768","2769","2770","2771","2772","2861","2862","2863","2864","2866"],i=["25","424","905","2755"],s=["2655","851"],c=["82","632"];n.forEach((e=>{for(let t=0;t<e.length;t++){if(!e[t])continue;const{m:n}=e[t]._attributes}}));const l=new Uint8ClampedArray(t.y*t.x*4);for(let d=0;d<t.y;d++)for(let e=0;e<t.x;e++){var o,u;const m=4*(d*t.x+e),j=null===(o=n[e][d])||void 0===o||null===(u=o._attributes)||void 0===u?void 0:u.m;j?"-2"!==j?a.includes(j)?(l[m]=255,l[m+1]=255,l[m+2]=255,l[m+3]=255):r.includes(j)?(l[m]=200,l[m+1]=200,l[m+2]=200,l[m+3]=255):i.includes(j)?(l[m]=50,l[m+1]=50,l[m+2]=200,l[m+3]=255):s.includes(j)?(l[m]=200,l[m+1]=200,l[m+2]=50,l[m+3]=0):c.includes(j)?(l[m]=255,l[m+1]=165,l[m+2]=0,l[m+3]=255):(l[m]=100,l[m+1]=100,l[m+2]=100,l[m+3]=255):(l[m]=20,l[m+1]=20,l[m+2]=0,l[m+3]=0):(l[m]=0,l[m+1]=0,l[m+2]=0,l[m+3]=0)}return l},S=n(597),C=n.n(S);var y=({tiles:e,dimensions:t,...n})=>{const[r]=Object(s.a)(w),i=Object(a.useRef)(),[c,l]=Object(a.useState)(null);return Object(a.useEffect)((()=>{if(!e||!t)return;(async()=>{l(await r(e,t))})()}),[e,t,r]),Object(a.useEffect)((()=>{if(!c)return;const e=i.current,t=e.getContext("2d");e.width=56,e.height=56;const n=t.createImageData(56,56);n.data.set(c),t.webkitImageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1,t.putImageData(n,0,0)}),[c]),Object(f.jsx)("canvas",{ref:i,className:C.a.image,...n})};var N=({name:e,shipId:t,crew:n,tiles:r,dimensions:m})=>{const{editGameData:j}=Object(a.useContext)(i.a),[b,p]=Object(a.useState)(!1),[v,h]=Object(a.useState)(null),[x]=Object(s.a)(g),w=Object(a.createRef)();return Object(a.useEffect)((()=>{if(r){(async()=>{h(await x(r))})()}}),[r]),Object(f.jsx)(u.a,{children:Object(f.jsxs)("div",{className:_.a.wrapper,id:e,children:[Object(f.jsxs)("div",{className:_.a.infoBar,children:[Object(f.jsx)("div",{className:_.a.titleBar,children:b?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{defaultValue:e,ref:w}),Object(f.jsx)("button",{onClick:t=>{t.preventDefault(),p(!1),j({type:"setShipName",value:w.current.value,name:e})},children:Object(f.jsx)(c.a,{id:"change",defaultMessage:"Change"})}),Object(f.jsx)("button",{onClick:e=>{e.preventDefault(),p(!1)},children:Object(f.jsx)(c.a,{id:"reset",defaultMessage:"Reset"})})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a,{level:3,style:{marginRight:".5rem"},children:e}),Object(f.jsx)(l.Edit3,{onClick:()=>{p(!0)},height:"15",width:"15"})]})}),Object(f.jsxs)("div",{children:[Object(f.jsx)(d.a,{level:4,children:Object(f.jsx)(c.a,{id:"crew",defaultMessage:"Crew"})}),null===n||void 0===n?void 0:n.map((e=>Object(f.jsx)(o.b,{to:`/edit/crew#${e._attributes.name}`,children:Object(f.jsx)(u.a,{inline:!0,children:Object(f.jsx)("span",{className:_.a.crewLink,children:e._attributes.name})})},e._attributes.entId)))]}),Object(f.jsx)(y,{tiles:r,dimensions:m})]}),Object(f.jsx)("div",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)(d.a,{level:4,children:"Storage"}),Object(f.jsx)("div",{className:_.a.storageSpace,children:v?null===v||void 0===v?void 0:v.map((e=>{var n,a,r,i,s,c,l,o;return Object(f.jsx)(O,{inventory:null===e||void 0===e||null===(n=e.l)||void 0===n||null===(a=n[3])||void 0===a||null===(r=a.feat)||void 0===r||null===(i=r.inv)||void 0===i?void 0:i.s,eatAllowed:null===e||void 0===e||null===(s=e.l)||void 0===s||null===(c=s[3])||void 0===c||null===(l=c.feat)||void 0===l||null===(o=l._attributes)||void 0===o?void 0:o.eatAllowed,shipId:t,tileDetails:{x:e._attributes.x,y:e._attributes.y}},`${t}${e._attributes.x}${e._attributes.y}`)})):Object(f.jsx)(u.a,{children:"Loading.."})})]})]})})};t.default=()=>{const{gameData:{ships:e}}=Object(a.useContext)(i.a);return Object(f.jsx)(r.a,{children:null===e||void 0===e?void 0:e.map((e=>Object(f.jsx)(N,{name:e.name,shipId:e.id,crew:e.characters,tiles:e.tiles,dimensions:e.dimensions},e.id)))})}},90:function(e,t,n){e.exports={wrapper:"page_wrapper__1wO3F",internal:"page_internal__1hyjw",mainSection:"page_mainSection__28DiR",center:"page_center__2bm4Z",withScroll:"page_withScroll__p_JO7"}},91:function(e,t,n){e.exports={box:"navlink_box__OdQqZ",inner:"navlink_inner__k_XDU",active:"navlink_active__1Qr78"}},92:function(e,t,n){e.exports={wrapper:"sidebar_wrapper__2zrJm",list:"sidebar_list__313eR"}},93:function(e,t,n){"use strict";var a=n(37),r=n(4),i=n(90),s=n.n(i),c=n(1),l=n(94),o=n(87),u=n(16),d=n(91),m=n.n(d),j=n(2);var b=({children:e,to:t,onClick:n,icon:a})=>n?Object(j.jsx)("li",{className:m.a.box,children:Object(j.jsxs)("div",{role:"button",className:m.a.inner,onClick:n,children:[a,Object(j.jsx)("span",{children:e})]})}):Object(j.jsx)("li",{className:m.a.box,children:Object(j.jsx)(u.c,{to:t,activeClassName:m.a.active,children:Object(j.jsxs)("div",{className:m.a.inner,children:[a,Object(j.jsx)("span",{children:e})]})})}),f=n(19),p=n(92),v=n.n(p);var h=()=>{const{reset:e}=Object(c.useContext)(f.a);return Object(j.jsx)("div",{className:v.a.wrapper,children:Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:v.a.list,children:[Object(j.jsx)(b,{to:"/edit",icon:Object(j.jsx)(l.Circle,{}),children:Object(j.jsx)(o.a,{id:"home",defaultMessage:"Home"})}),Object(j.jsx)(b,{to:"/edit/research",icon:Object(j.jsx)(l.FlaskConical,{}),children:Object(j.jsx)(o.a,{id:"research",defaultMessage:"Research"})}),Object(j.jsx)(b,{to:"/edit/crew",icon:Object(j.jsx)(l.Users,{}),children:Object(j.jsx)(o.a,{id:"crew",defaultMessage:"Crew"})}),Object(j.jsx)(b,{to:"/edit/ships",icon:Object(j.jsx)(l.Plane,{}),children:Object(j.jsx)(o.a,{id:"ships",defaultMessage:"Ships"})}),Object(j.jsx)(b,{onClick:e,icon:Object(j.jsx)(l.Trash2,{}),children:Object(j.jsx)(o.a,{id:"discard",defaultMessage:"Discard"})})]})})})};t.a=({children:e,center:t,withScroll:n=!1})=>Object(r.g)().pathname.startsWith("/edit")?Object(j.jsxs)("main",{className:Object(a.a)(s.a.wrapper,s.a.internal),children:[Object(j.jsx)(h,{}),Object(j.jsx)("div",{className:Object(a.a)(s.a.mainSection,t&&s.a.center),children:e})]}):Object(j.jsx)("main",{className:Object(a.a)(s.a.wrapper,n&&s.a.withScroll,t&&s.a.center),children:e})},95:function(e,t,n){"use strict";var a=n(37),r=n(96),i=n.n(r),s=n(2);t.a=({children:e,className:t,inline:n,mode:r="lighten",...c})=>Object(s.jsx)("div",{className:Object(a.a)(i.a.wrapper,i.a[r],n?i.a.inline:null,t),...c,children:e})},96:function(e,t,n){e.exports={wrapper:"card_wrapper__2NX3z",inline:"card_inline__3rPcc",lighten:"card_lighten__1US7G",darken:"card_darken__1dHKE"}},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a,r,i=n(1),s=n(102),c=function(e){return function(t){return Promise.resolve(e.fn.apply(e,t.data[0])).then((function(t){var n,a="auto"===e.transferable&&(n=t,"ArrayBuffer"in self&&n instanceof ArrayBuffer||"MessagePort"in self&&n instanceof MessagePort||"ImageBitmap"in self&&n instanceof ImageBitmap||"OffscreenCanvas"in self&&n instanceof OffscreenCanvas)?[t]:[];postMessage(["SUCCESS",t],a)})).catch((function(e){postMessage(["ERROR",e])}))}},l=function(e,t,n){var a="\n    "+function(e){return 0===e.length?"":"importScripts("+e.map((function(e){return"'"+e+"'"})).toString()+")"}(t)+";\n    onmessage=("+c+")({\n      fn: ("+e+"),\n      transferable: '"+n+"'\n    })\n  ",r=new Blob([a],{type:"text/javascript"});return URL.createObjectURL(r)};(r=a||(a={})).PENDING="PENDING",r.SUCCESS="SUCCESS",r.RUNNING="RUNNING",r.ERROR="ERROR",r.TIMEOUT_EXPIRED="TIMEOUT_EXPIRED";var o,u=a;!function(e){e.AUTO="auto",e.NONE="none"}(o||(o={}));var d={timeout:void 0,remoteDependencies:[],autoTerminate:!0,transferable:o.AUTO},m=function(e,t){void 0===t&&(t=d);var n,a,r,c=i.useState(u.PENDING),m=c[0],j=c[1],b=i.useRef(),f=i.useRef(!1),p=i.useRef({}),v=i.useRef(),h=i.useCallback((function(e){f.current=e===u.RUNNING,j(e)}),[]),O=i.useCallback((function(){var e;null!==(e=b.current)&&void 0!==e&&e._url&&(b.current.terminate(),URL.revokeObjectURL(b.current._url),p.current={},b.current=void 0,window.clearTimeout(v.current))}),[]),x=i.useCallback((function(e){(null!=t.autoTerminate?t.autoTerminate:d.autoTerminate)&&O(),h(e)}),[t.autoTerminate,O,h]),_=(n=function(){var n=t.remoteDependencies,a=t.timeout,r=void 0===a?d.timeout:a,i=t.transferable,s=l(e,void 0===n?d.remoteDependencies:n,void 0===i?d.transferable:i),c=new Worker(s);return c._url=s,c.onmessage=function(e){var t,n,a,r,i=e.data,s=i[1];switch(i[0]){case u.SUCCESS:null===(t=(n=p.current).resolve)||void 0===t||t.call(n,s),x(u.SUCCESS);break;default:null===(a=(r=p.current).reject)||void 0===a||a.call(r,s),x(u.ERROR)}},c.onerror=function(e){var t,n;null===(t=(n=p.current).reject)||void 0===t||t.call(n,e),x(u.ERROR)},r&&(v.current=window.setTimeout((function(){O(),h(u.TIMEOUT_EXPIRED)}),r)),c},r=i.useRef(a=[e,t,O]),s(r.current,a)||(r.current=a),i.useCallback(n,r.current)),g=i.useCallback((function(){var e=[].slice.call(arguments),n=t,a=n.transferable,r=void 0===a?d.transferable:a;return new Promise((function(t,n){var a,i;p.current=((a={}).resolve=t,a.reject=n,a);var s=r===o.AUTO?e.filter((function(e){return"ArrayBuffer"in window&&e instanceof ArrayBuffer||"MessagePort"in window&&e instanceof MessagePort||"ImageBitmap"in window&&e instanceof ImageBitmap||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas})):[];null===(i=b.current)||void 0===i||i.postMessage([[].concat(e)],s),h(u.RUNNING)}))}),[h]),w=i.useCallback((function(){var e=null!=t.autoTerminate?t.autoTerminate:d.autoTerminate;return f.current?(console.error("[useWorker] You can only run one instance of the worker at a time, if you want to run more than one in parallel, create another instance with the hook useWorker(). Read more: https://github.com/alewin/useWorker"),Promise.reject()):(!e&&b.current||(b.current=_()),g.apply(void 0,[].slice.call(arguments)))}),[t.autoTerminate,_,g]),S={status:m,kill:O};return i.useEffect((function(){return function(){O()}}),[O]),[w,S]}}}]);
//# sourceMappingURL=4.fa8c47e8.chunk.js.map