{"version":3,"sources":["constants.js","lib/readXmlFile.js","lib/writeXmlFile.js","lib/parseGameData.js","lib/rewriteGameData.js","context/SaveContext.js","components/heading.module.css","components/github.module.css","components/Heading.js","components/header.module.css","components/footer.module.css","components/layout.module.css","lang/index.js","components/InternalRoute.js","components/GitHub.js","components/Header.js","components/Footer.js","components/Layout.js","App.js","serviceWorkerRegistration.js","reportWebVitals.js","lib/sendToGoogleAnalytics.js","index.js"],"names":["DEFAULT_LOCALE","LOCALE_STORAGE_KEY","IS_COMPACT_OBJ","readXmlFile","async","content","file","text","xml","xml2js","compact","alwaysArray","js2xml","model","spaces","parseGameData","data","game","ships","crafts","research","playerBank","output","ship","map","shipObject","name","_attributes","sname","id","sid","tiles","e","dimensions","x","parseInt","sx","y","sy","characters","c","monsters","m","robots","r","craft","craftObject","cname","states","l","tree","treeId","active","activeResearchId","bank","credits","ca","rewriteGameData","JSON","parse","stringify","forEach","edited","find","item","res","techId","SaveContext","createContext","initGameData","getShipIndex","state","findIndex","getCharacterIndex","shipIndex","char","entId","gameReducer","action","newState","clone","proto","actions","insert","reset","plusResearch","resIndex","getResearchIndex","blocksDone","level","minusResearch","index","setResearch","value","setCredits","setShipName","setSuited","charIndex","is","removeCondition","condIndex","pers","conditions","cond","condition","splice","setStorageElement","storageIndex","getStorageIndex","itemIndex","element","feat","inv","s","elementaryId","getStorageItemIndex","inStorage","count","type","Error","SaveProvider","children","saveData","setSaveData","useState","gameFile","setGameFile","gameData","editGameData","useReducer","Provider","insertSaveData","blobs","process","retrieveGameData","newData","newXml","writeXmlFile","File","handle","fileSave","fileName","module","exports","Heading","noFont","other","HLevel","className","clsx","styles","heading","messages","InternalRoute","fallback","useContext","to","GitHub","formatMessage","useIntl","wrapper","href","rel","target","logo","src","alt","defaultMessage","Header","Footer","Layout","Home","lazy","Edit","Crew","Research","Ships","Reference","Internal","path","App","locale","setLocale","localStorage","getItem","useEffect","document","getElementById","remove","strings","defaultLocale","Boolean","window","location","hostname","match","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","sendToGoogleAnalytics","delta","gtag","event_category","event_label","Math","round","non_interaction","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.54a1c4ab.chunk.js","sourcesContent":["export const DEFAULT_LOCALE = \"en-US\";\nexport const LOCALE_STORAGE_KEY = \"_locale\";\nexport const IS_COMPACT_OBJ = true;\n","import xml from \"xml-js\";\nimport { IS_COMPACT_OBJ } from \"../constants\";\n\nconst readXmlFile = async (file) => {\n  const content = await file.text();\n\n  if (!content) {\n    return null;\n  }\n\n  return xml.xml2js(content, {\n    compact: IS_COMPACT_OBJ,\n    alwaysArray: [\"c\", \"ship\", \"l\", \"r\", \"m\", \"s\", \"t\", \"b\", \"e\"],\n  });\n};\n\nexport default readXmlFile;\n","import xml from \"xml-js\";\nimport { IS_COMPACT_OBJ } from \"../constants\";\n\nconst readXmlFile = async (model) => {\n  return xml.js2xml(model, { spaces: \"\\t\", compact: IS_COMPACT_OBJ });\n};\n\nexport default readXmlFile;\n","const parseGameData = (data) => {\n  if (!data?.game?.ships) {\n    return null;\n  }\n\n  const {\n    game: { ships, crafts, research, playerBank },\n  } = data;\n  const output = {};\n\n  if (ships?.ship) {\n    output.ships = ships.ship.map((ship) => {\n      const shipObject = {};\n      shipObject.name = ship._attributes.sname;\n      shipObject.id = ship._attributes.sid;\n      shipObject.tiles = ship.e;\n      shipObject.dimensions = {\n        x: parseInt(ship._attributes.sx, 10),\n        y: parseInt(ship._attributes.sy, 10),\n      };\n      shipObject.characters = ship.characters?.c || [];\n      shipObject.monsters = ship.characters?.m || [];\n      shipObject.robots = ship.characters?.r || [];\n\n      return shipObject;\n    });\n  }\n\n  if (crafts?.c) {\n    output.crafts = crafts.c.map((craft) => {\n      const craftObject = {};\n\n      craftObject.id = craft._attributes.id;\n      craftObject.name = craft._attributes.cname || null;\n      craftObject.characters = craft.characters?.c || [];\n      craftObject.robots = craft.characters?.r || [];\n\n      return craftObject;\n    });\n  }\n\n  if (research?.states?.l) {\n    output.research = {\n      states: research.states.l,\n      tree: research._attributes?.treeId,\n      active: research._attributes?.activeResearchId,\n    };\n  }\n\n  output.bank = { credits: playerBank?._attributes?.ca };\n\n  return output;\n};\n\nexport default parseGameData;\n","const rewriteGameData = (file, data) => {\n  if (!data.ships || !data.crafts || !data.research || !data.bank) {\n    return null;\n  }\n\n  const output = JSON.parse(JSON.stringify(file));\n\n  output.game.ships.ship.forEach((ship) => {\n    const edited = data.ships.find((item) => {\n      return item.id === ship._attributes.sid;\n    });\n\n    ship._attributes.sname = edited.name;\n\n    ship.characters.c = edited.characters;\n    // ship.monsters.c = edited.monsters;\n    // ship.robots.c = edited.robots;\n  });\n\n  output.game.crafts.c.forEach((craft) => {\n    const edited = data.crafts.find((item) => {\n      return item.id === craft._attributes.id;\n    });\n\n    if (craft._attributes.cname) {\n      craft._attributes.cname = edited.name;\n    }\n    if (craft.characters) {\n      craft.characters.c = edited.characters;\n    }\n    // if (craft.robots) {\n    //   craft.robots.c = edited.robots;\n    // }\n  });\n\n  output.game.research.states.l.forEach((res) => {\n    const edited = data.research.states[res._attributes.techId];\n\n    res = edited;\n  });\n\n  output.game.research._attributes.activeResearchId = data.research.active;\n  output.game.research._attributes.treeId = data.research.tree;\n\n  output.game.playerBank._attributes.ca = data.bank.credits;\n\n  return output;\n};\n\nexport default rewriteGameData;\n","import { createContext, useReducer, useState } from \"react\";\nimport clone from \"rfdc\";\nimport { fileSave } from \"browser-fs-access\";\n\nimport readXmlFile from \"../lib/readXmlFile\";\nimport writeXmlFile from \"../lib/writeXmlFile\";\nimport parseGameData from \"../lib/parseGameData\";\nimport rewriteGameData from \"../lib/rewriteGameData\";\n\nexport const SaveContext = createContext(null);\n\nconst initGameData = () => {\n  return {};\n};\n\nconst getShipIndex = (state, id) => {\n  return state.ships.findIndex((ship) => ship.id === id);\n};\n\nconst getCharacterIndex = (state, shipIndex, id) => {\n  return state.ships[shipIndex]?.characters.findIndex(\n    (char) => char._attributes.name === id || char._attributes.entId === id,\n  );\n};\n\nconst getStorageIndex = (state, shipIndex, x, y) => {\n  return state.ships[shipIndex]?.tiles.findIndex(\n    (e) => e.l && e._attributes.x === x && e._attributes.y === y,\n  );\n};\n\nconst getStorageItemIndex = (state, shipIndex, storageIndex, element) => {\n  return state.ships[shipIndex]?.tiles[storageIndex].l[3].feat.inv.s.findIndex(\n    (l) => l._attributes.elementaryId === element,\n  );\n};\n\nconst getResearchIndex = (state, id) =>\n  state.research.states.findIndex((res) => res._attributes.techId === id);\n\nconst gameReducer = (state, action) => {\n  const newState = clone({ proto: false })(state);\n\n  const actions = {\n    insert: () => action.state,\n    reset: () => initGameData({}),\n    plusResearch: () => {\n      const resIndex = getResearchIndex(newState, action.id);\n      newState.research.states[resIndex].blocksDone._attributes[action.level] =\n        parseInt(\n          newState.research.states[resIndex].blocksDone._attributes[\n            action.level\n          ],\n          10,\n        ) + 1;\n      return newState;\n    },\n    minusResearch: () => {\n      newState.research.states[action.index].blocksDone._attributes[\n        action.level\n      ] =\n        parseInt(\n          newState.research.states[action.index].blocksDone._attributes[\n            action.level\n          ],\n          10,\n        ) + 1;\n      return newState;\n    },\n    setResearch: () => {\n      newState.research.states[action.id].blocksDone._attributes[action.level] =\n        action.value;\n      return newState;\n    },\n    setCredits: () => {\n      newState.bank.credits = action.value;\n      return newState;\n    },\n    setShipName: () => {\n      const shipIndex = newState.ships.findIndex(\n        (ship) => ship.name === action.name,\n      );\n      if (shipIndex >= 0) {\n        newState.ships[shipIndex].name = action.value;\n      }\n      return newState;\n    },\n    setSuited: () => {\n      const shipIndex = getShipIndex(newState, action.ship);\n      const charIndex = getCharacterIndex(newState, shipIndex, action.name);\n\n      if (shipIndex >= 0 && charIndex >= 0) {\n        if (action.value) {\n          newState.ships[shipIndex].characters[charIndex]._attributes.is = \"1\";\n        } else if (\n          newState.ships[shipIndex].characters[charIndex]._attributes.is\n        ) {\n          delete newState.ships[shipIndex].characters[charIndex]._attributes.is;\n        }\n        return newState;\n      }\n    },\n    removeCondition: () => {\n      const shipIndex = getShipIndex(newState, action.ship);\n      const charIndex = getCharacterIndex(newState, shipIndex, action.name);\n      const condIndex = newState.ships[shipIndex]?.characters[\n        charIndex\n      ].pers.conditions.c.findIndex(\n        (cond) => cond._attributes.id === action.condition,\n      );\n\n      if (shipIndex >= 0 && charIndex >= 0 && condIndex >= 0) {\n        newState.ships[shipIndex]?.characters[\n          charIndex\n        ].pers.conditions.c.splice(condIndex, 1);\n\n        return newState;\n      }\n    },\n    setStorageElement: () => {\n      const shipIndex = getShipIndex(newState, action.ship);\n      const storageIndex = getStorageIndex(\n        newState,\n        shipIndex,\n        action.x,\n        action.y,\n      );\n      const itemIndex = getStorageItemIndex(\n        newState,\n        shipIndex,\n        storageIndex,\n        action.element,\n      );\n      if (shipIndex >= 0 && storageIndex >= 0 && itemIndex >= 0) {\n        newState.ships[shipIndex].tiles[storageIndex].l[3].feat.inv.s[itemIndex]._attributes.inStorage =\n          action.count;\n      }\n      return newState;\n    },\n  };\n\n  if (!actions[action.type]) {\n    throw new Error(\"No such action in editGameData reducer\");\n  }\n\n  return actions[action.type]();\n};\n\nconst SaveProvider = ({ children }) => {\n  const [saveData, setSaveData] = useState(null);\n  const [gameFile, setGameFile] = useState(null);\n  const [gameData, editGameData] = useReducer(gameReducer, {}, initGameData);\n\n  const insertSaveData = async (blobs) => {\n    setSaveData(blobs);\n    // const gameFile = blobs.find((item) => item.name === \"game\");\n    const gameFile = blobs;\n\n    if (gameFile) {\n      const data = await readXmlFile(gameFile);\n      if (process.env.NODE_ENV === \"development\") {\n        console.log(\"This appears only in development.\\nDebug data:\");\n        console.log(data);\n      }\n      setGameFile(data);\n      editGameData({ type: \"insert\", state: parseGameData(data) });\n    }\n  };\n\n  const retrieveGameData = async () => {\n    const newData = rewriteGameData(gameFile, gameData);\n    const newXml = await writeXmlFile(newData);\n    const file = new File([newXml], \"game\");\n    const handle = saveData.handle;\n    await fileSave(file, { fileName: \"game\" }, handle);\n  };\n\n  const reset = () => {\n    setSaveData(null);\n    setGameFile(null);\n    editGameData({ type: \"reset\" });\n  };\n\n  return (\n    <SaveContext.Provider\n      value={{\n        gameData,\n        editGameData,\n        gameFile,\n        saveData,\n        insertSaveData,\n        retrieveGameData,\n        reset,\n      }}\n    >\n      {children}\n    </SaveContext.Provider>\n  );\n};\n\nexport default SaveProvider;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heading\":\"heading_heading__2i3Kf\",\"noFont\":\"heading_noFont__3Lj4O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"github_wrapper__2LYNf\",\"logo\":\"github_logo__1ic0a\"};","import clsx from \"clsx\";\nimport styles from \"./heading.module.css\";\n\nconst Heading = ({ level = 1, noFont = false, children, ...other }) => {\n  const HLevel = `h${level >= 1 || level <= 6 ? level : 1}`;\n\n  return (\n    <HLevel\n      className={clsx(styles.heading, (noFont || level > 2) && styles.noFont)}\n      {...other}\n    >\n      {children}\n    </HLevel>\n  );\n};\n\nexport default Heading;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"header_wrapper__qgCxK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"footer_wrapper__1C--_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"layout_wrapper__ixEjb\"};","import en_US from \"./compiled/en-US.json\";\n\nconst messages = {\n  \"en-US\": en_US,\n};\nexport default messages;\n","import { useContext } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { SaveContext } from \"../context/SaveContext\";\n\nconst InternalRoute = ({ element, fallback }) => {\n  const { gameData } = useContext(SaveContext);\n\n  if (!fallback) {\n    fallback = <Navigate to=\"/\" />;\n  }\n\n  return gameData.ships ? element : fallback;\n};\n\nexport default InternalRoute;\n","import { useIntl } from \"react-intl\";\nimport styles from \"./github.module.css\";\n\nconst GitHub = () => {\n  const { formatMessage } = useIntl();\n  return (\n    <div className={styles.wrapper}>\n      <a\n        href=\"https://github.com/MoltenCoffee/space-haven-editor\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n      >\n        <img\n          className={styles.logo}\n          src=\"github64.png\"\n          alt={formatMessage({\n            id: \"source_code\",\n            defaultMessage: \"Source Code on GitHub\",\n          })}\n        />\n      </a>\n    </div>\n  );\n};\n\nexport default GitHub;\n","import { FormattedMessage } from \"react-intl\";\nimport Heading from \"./Heading\";\nimport styles from \"./header.module.css\";\nimport GitHub from \"./GitHub\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Header = () => {\n  return (\n    <header className={styles.wrapper}>\n      <Heading>\n        <NavLink to=\"/\">\n          <FormattedMessage\n            id=\"title\"\n            defaultMessage=\"Space Haven Editor\"\n          />\n        </NavLink>\n      </Heading>\n      <GitHub />\n    </header>\n  );\n};\n\nexport default Header;\n","import { FormattedMessage } from \"react-intl\";\n\nimport styles from \"./footer.module.css\";\n\nconst Footer = () => {\n  return (\n    <footer className={styles.wrapper}>\n      <FormattedMessage id=\"created_by\" defaultMessage=\"Created by\" />\n      &nbsp;\n      <a\n        href=\"https://github.com/MoltenCoffee\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n      >\n        @MoltenCoffee\n      </a>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import styles from \"./layout.module.css\";\n\nconst Layout = ({ children }) => {\n  return <div className={styles.wrapper}>{children}</div>;\n};\n\nexport default Layout;\n","import { useState, useEffect, lazy, Suspense } from \"react\";\nimport { IntlProvider } from \"react-intl\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\n\nimport strings from \"./lang\";\nimport { DEFAULT_LOCALE, LOCALE_STORAGE_KEY } from \"./constants\";\n\nimport SaveProvider from \"./context/SaveContext\";\n\nimport InternalRoute from \"./components/InternalRoute\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Layout from \"./components/Layout\";\n\nconst Home = lazy(() => import(\"./pages/Home\"));\nconst Edit = lazy(() => import(\"./pages/Edit\"));\nconst Crew = lazy(() => import(\"./pages/Crew\"));\nconst Research = lazy(() => import(\"./pages/Research\"));\nconst Ships = lazy(() => import(\"./pages/Ships\"));\n// import Reference from \"./pages/Reference\";\n\nconst Reference = lazy(() => import(\"./pages/Reference\"));\n\nconst Internal = () => {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <Routes>\n        <Route path=\"/\" element={<Edit />} />\n        <Route path=\"crew\" element={<Crew />} />\n        <Route path=\"research\" element={<Research />} />\n        <Route path=\"ships\" element={<Ships />} />\n      </Routes>\n    </Suspense>\n  );\n};\n\nconst App = () => {\n  const [locale, setLocale] = useState(\n    localStorage.getItem(LOCALE_STORAGE_KEY) || null,\n  );\n\n  useEffect(() => {\n    document.getElementById(\"initialTitle\").remove();\n  }, []);\n\n  return (\n    <IntlProvider\n      messages={strings}\n      locale={locale || DEFAULT_LOCALE}\n      defaultLocale={DEFAULT_LOCALE}\n    >\n      <SaveProvider>\n        <BrowserRouter>\n          <Layout>\n            <Header />\n            <Routes>\n              <Route path=\"/\" element={<Home />} />\n              <Route path=\"/reference\" element={<Reference />} />\n              <InternalRoute path=\"edit/*\" element={<Internal />} />\n            </Routes>\n            <Footer />\n          </Layout>\n        </BrowserRouter>\n      </SaveProvider>\n    </IntlProvider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","function sendToGoogleAnalytics({ name, delta, id }) {\n  /* eslint-disable-next-line no-undef */\n  gtag(\"event\", name, {\n    event_category: \"Web Vitals\",\n    event_label: id,\n    value: Math.round(name === \"CLS\" ? delta * 1000 : delta),\n    non_interaction: true,\n  });\n}\n\nexport default sendToGoogleAnalytics;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport reportWebVitals from './reportWebVitals';\nimport sendToGoogleAnalytics from \"./lib/sendToGoogleAnalytics\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorkerRegistration.unregister();\nreportWebVitals(sendToGoogleAnalytics);\n"],"sourceRoot":""}